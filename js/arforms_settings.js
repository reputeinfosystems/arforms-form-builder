"use strict";function arflite_global_form_validate(){let i=jQuery("#arfcurrenttab").val();if(0==wp.hooks.applyFilters("arforms_validate_general_settings",!0,i))jQuery("html, body").animate({scrollTop:"0"},800);else{var e=jQuery(".frm_settings_form").FilterFormData(),e=jQuery.toJSON(e),r=jQuery("#arflite_validation_nonce").val();jQuery("#arfsaveformloader").show();let l=jQuery("#arforms_settings_page_url").val();""==l&&(l=window.location.href);var s=wp.hooks.applyFilters("arforms_change_settings_action","arf_save_setting_data",i);jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:s,_wpnonce_arfnonce:r,setting_form_data:e},success:function(e){var r,s,a,t,_;jQuery("#arfsaveformloader").hide(),"success"==e.variant?(jQuery("#frm_errors").delay(5e3).fadeOut("slow"),"general_settings"==i&&(jQuery("#arf_custom_custom").is(":checked")?(t=jQuery("#frm_smtp_host").val(),_=jQuery("#frm_smtp_port").val(),r=jQuery("#is_smtp_authentication").is(":checked"),s=jQuery("#frm_smtp_username").val(),a=jQuery("#frm_smtp_password").val(),""!=t&&""!=_&&1==r&&""!=s&&""!=a?(jQuery("#sendtestmail_to").removeClass("arfdisabled").attr("disabled",!1),jQuery("#sendtestmail_msg").removeClass("arfdisabled").attr("disabled",!1)):(jQuery("#sendtestmail_to").addClass("arfdisabled").attr("disabled",!0),jQuery("#sendtestmail_msg").addClass("arfdisabled").attr("disabled",!0))):jQuery("#arf_wordpress_gmail_api").is(":checked")&&(t=jQuery("#frm_gmail_api_clientid").val(),_=jQuery("#frm_gmail_api_clientsecret").val(),""!=t&&""!=_?(jQuery("#arflite_sendtestgmail_to").removeClass("arfdisabled").attr("disabled",!1),jQuery("#arflite_sendtestgmail_msg").removeClass("arfdisabled").attr("disabled",!1)):(jQuery("#arflite_sendtestgmail_to").addClass("arfdisabled").attr("disabled",!0),jQuery("#arflite_sendtestgmail_msg").addClass("arfdisabled").attr("disabled",!0)))),window.location.href=l+"&is_success=true"):(jQuery("#form_error_message_des").html(e.msg),arforms_error_msg())}})}return!1}function arforms_validate_settings_callback(e,r){var s;return"general_settings"==r&&(""==jQuery("#frm_blank_msg").val()?(jQuery("#frm_blank_msg").css("border-color","#ff0000"),jQuery("#arfblankerrmsg").css("display","block"),e=!1):(jQuery("#frm_blank_msg").css("border-color","#BCCBDA"),jQuery("#arfblankerrmsg").css("display","none")),""==jQuery("#arfinvalidmsg").val()?(jQuery("#arfinvalidmsg").css("border-color","#ff0000"),jQuery("#arfinvalidmsg_error").css("display","block"),e=!1):(jQuery("#arfinvalidmsg").css("border-color","#BCCBDA"),jQuery("#arfinvalidmsg_error").css("display","none")),""==jQuery("#arfsuccessmsg").val()?(jQuery("#arfsuccessmsg").css("border-color","#ff0000"),jQuery("#arfsuccessmsgerr").css("display","block"),e=!1):(jQuery("#arfsuccessmsg").css("border-color","#BCCBDA"),jQuery("#arfsuccessmsgerr").css("display","none")),""==jQuery("#arfmessagefailed").val()?(jQuery("#arfmessagefailed").css("border-color","#ff0000"),jQuery("#arferrormessagefailed").css("display","block"),e=!1):(jQuery("#arfmessagefailed").css("border-color","#BCCBDA"),jQuery("#arferrormessagefailed").css("display","none")),""==jQuery("#arfmessageempty").val()?(jQuery("#arfmessageempty").css("border-color","#ff0000"),jQuery("#arferrormessageempty").css("display","block"),e=!1):(jQuery("#arfmessageempty").css("border-color","#BCCBDA"),jQuery("#arferrormessageempty").css("display","none")),""==jQuery("#arfvaluesubmit").val()?(jQuery("#arfvaluesubmit").css("border-color","#ff0000"),jQuery("#arferrsubmitvalue").css("display","block"),e=!1):(jQuery("#arfvaluesubmit").css("border-color","#BCCBDA"),jQuery("#arferrsubmitvalue").css("display","none")),""==jQuery("#frm_reply_to_name").val()?(jQuery("#frm_reply_to_name").css("border-color","#ff0000"),jQuery("#frm_reply_to_name_error").css("display","block"),e=!1):(jQuery("#frm_reply_to_name").css("border-color","#BCCBDA"),jQuery("#frm_reply_to_name_error").css("display","none")),""==jQuery("#frm_reply_to").val()?(jQuery("#frm_reply_to").css("border-color","#ff0000"),jQuery("#frm_reply_to_error").css("display","block"),jQuery("#frm_reply_to_invalid_mail_error").css("display","none"),e=!1):(s=jQuery("#frm_reply_to").val(),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?(jQuery("#frm_reply_to").css("border-color","#BCCBDA"),jQuery("#frm_reply_to_error").css("display","none"),jQuery("#frm_reply_to_invalid_mail_error").css("display","none")):(jQuery("#frm_reply_to").css("border-color","#ff0000"),jQuery("#frm_reply_to_error").css("display","none"),jQuery("#frm_reply_to_invalid_mail_error").css("display","block"),e=!1)),""==jQuery("#reply_to_email").val()?(jQuery("#reply_to_email").css("border-color","#ff0000"),jQuery("#reply_to_email_error").css("display","block"),jQuery("#reply_to_email_invalid_mail_error").css("display","none"),e=!1):(s=jQuery("#reply_to_email").val(),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?(jQuery("#reply_to_email").css("border-color","#BCCBDA"),jQuery("#reply_to_email_error").css("display","none"),jQuery("#reply_to_email_invalid_mail_error").css("display","none")):(jQuery("#reply_to_email").css("border-color","#ff0000"),jQuery("#reply_to_email_error").css("display","none"),jQuery("#reply_to_email_invalid_mail_error").css("display","block"),e=!1)),""!=jQuery(".arf_success_message_show_time").val()&&0<=parseInt(jQuery(".arf_success_message_show_time").val())?jQuery(".arf_success_message_show_time").css("border-color","#BCCBDA"):(jQuery(".arf_success_message_show_time").css("border-color","#ff0000"),e=!1)),e}function arformschangesmtpsetting(){console.log(jQuery('input[name="frm_smtp_server"]:checked').val()),"custom"==jQuery('input[name="frm_smtp_server"]:checked').val()?(jQuery(".arfsmptpsettings").show(),jQuery(".arfgmailapisetting").hide(),jQuery(".arflite_check_email_format").show(),arf_is_smtp_authentication()):"arflite_gmail_api"==jQuery('input[name="frm_smtp_server"]:checked').val()?(jQuery(".arfgmailapisetting").show(),jQuery(".arfsmptpsettings").hide(),jQuery(".arflite_check_email_format").hide()):(jQuery(".arfsmptpsettings").hide(),jQuery(".arflite_check_email_format").show(),jQuery(".arfgmailapisetting").hide())}function arf_is_smtp_authentication(){jQuery("input#is_smtp_authentication").is(":checked")?jQuery(".arf_authentication_field").show():jQuery(".arf_authentication_field").hide()}function arflite_connect_gmail_api(e,r,s){""!=r&&""!=s?(jQuery(".arflite_error_msg_gmail_client_id").css("display","none"),jQuery(".arflite_error_msg_gmail_client_secret").css("display","none"),s=Base64.encode("action:gmail_oauth"),e=encodeURI(e),window.open("https://accounts.google.com/o/oauth2/auth?response_type=code&access_type=offline&client_id="+r+"&redirect_uri="+e+"&state="+s+"&scope=https://mail.google.com/&approval_prompt=force&include_granted_scopes=false","ARForms Gmail API Authentication","height=500, width=500")):(jQuery(".arflite_error_msg_gmail_client_id").css("display","block"),jQuery(".arflite_error_msg_gmail_client_secret").css("display","block"))}function arflite_gmail_api_remove(e,r,s,a,t){var _=jQuery("#arflite_validation_nonce").val();jQuery.ajax({type:"POST",url:ajaxurl,data:"action=arf_gmail_remove_auth&gmail_client_id="+e+"&client_sceret="+r+"&auth_token="+s+"&connected_email="+a+"&access_token_data="+t+"&_wpnonce_arfnonce="+_,success:function(e){e=JSON.parse(e);"success"==e.variant?(jQuery("#frm_gmail_api_accesstoken").val(""),jQuery("#arflite_google_api_auth_link_remove").attr("style","display:none"),jQuery("#arflite_google_api_auth_link").attr("style","display:inline-block")):(jQuery("#form_error_message_des").html(e.msg),arforms_error_msg())}})}function arflite_show_test_mail(){jQuery("input#is_smtp_authentication").is(":checked")?""!=jQuery("input#frm_smtp_host").val()&&""!=jQuery("input#frm_smtp_port").val()&&""!=jQuery("input#frm_smtp_username").val()&&""!=jQuery("input#frm_smtp_password").val()?jQuery("#arf_send_test_mail").attr("disabled",!1):jQuery("#arf_send_test_mail").attr("disabled",!0):""!=jQuery("input#frm_smtp_host").val()&&""!=jQuery("input#frm_smtp_port").val()?jQuery("#arf_send_test_mail").attr("disabled",!1):jQuery("#arf_send_test_mail").attr("disabled",!0)}function arf_delete_junk_files(){jQuery(".arf_popup_container,.arf_modal_overlay").removeClass("arfactive"),jQuery("#arf_remove_junk_files_loader").css("display","inline-block");var e=jQuery("#arflite_validation_nonce").val();jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",data:"action=arf_remove_junk_files&_wpnonce="+e,success:function(e){0==e.error?(jQuery("#arf_settings_msg").html(e.message),success_msg(),jQuery("#arf_remove_junk_files_loader").hide(),setTimeout(function(){location.reload()},2e3)):(jQuery("#error_message").html(e.message),error_msg(),jQuery("#arf_remove_junk_files_loader").hide())}})}document.addEventListener("readystatechange",e=>{var r;"complete"===document.readyState&&(wp.hooks.addFilter("arforms_validate_general_settings","arforms-form-builder",arforms_validate_settings_callback,10),"1"==jQuery("#show_success_msg").val()&&(jQuery("#form_suc_message_des").html(arforms_settings_i18n_data.settings_i18n.settings_success_msg),arforms_success_msg(),window.history.pushState&&(r=arforms_remove_variables_from_url(document.URL,"is_success"),window.history.pushState({path:r},"",r))))}),jQuery(document).on("click","#arflite_send_test_gmail",function(e){e.preventDefault();var e=!1,r=(""!=jQuery("input#frm_gmail_api_accesstoken").val()&&""!=jQuery("input#frm_gmail_api_clientsecret").val()&&""!=jQuery("input#frm_gmail_api_clientid").val()?e=!0:jQuery("#arflite_send_test_gmail").prop("disabled",!0),jQuery("#arflite_sendtestgmail_to").val()),s=jQuery("#arflite_sendtestgmail_msg").val(),a=!0;if(""==r?(jQuery(".arf_error_msg_gmail_to_email").css("display","block"),jQuery(".arf_error_msg_gmail_to_invalid_email").css("display","none"),a=!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)?(jQuery(".arf_error_msg_gmail_to_email").css("display","none"),jQuery(".arf_error_msg_gmail_to_invalid_email").css("display","none")):(jQuery(".arf_error_msg_gmail_to_email").css("display","none"),jQuery(".arf_error_msg_gmail_to_invalid_email").css("display","block"),a=!1),""==s?(jQuery(".arf_error_msg_gmail_to_msg").css("display","block"),a=!1):jQuery(".arf_error_msg_gmail_to_msg").css("display","none"),!e||!a)return!1;var r=jQuery("input#arflite_sendtestgmail_to").val(),s=jQuery("input#arflite_connected_email").val(),e=jQuery("input#frm_reply_to_name").val(),a=jQuery("#arflite_sendtestgmail_msg").val(),t=jQuery("#arflite_validation_nonce").val();s&&(jQuery("#arflite_send_test_gmail_loader").show(),jQuery(".arf_btn_dark_blue").prop("disabled",!0).css("cursor","not-allowed"),jQuery.ajax({type:"POST",url:ajaxurl,data:"action=arf_send_test_gmail&send_to="+r+"&from_to="+s+"&reply_to_name="+e+"&message="+a+"&subject=Gmail Test E-Mail&_wpnonce_arfnonce="+t,success:function(e){e=JSON.parse(e);"true"==e.success?(jQuery("#arflite_error_test_gmail").hide(),jQuery("#arflite_success_test_gmail").show(),jQuery("#arflite_success_test_gmail").delay(3e3).fadeOut("slow"),jQuery("#arflite_sendtestgmail_to").val(""),jQuery("#arflite_sendtestgmail_msg").val("")):""!=e.msg&&(jQuery("#arflite_error_test_gmail").html(e.msg),jQuery("#arflite_error_test_gmail").show(),jQuery("#arflite_error_test_gmail").append(e.log),jQuery("#arflite_error_test_gmail").delay(3e3).fadeOut("slow")),jQuery("#arflite_send_test_gmail_loader").hide(),jQuery(".arf_btn_dark_blue").prop("disabled",!1).css("cursor","pointer")}}))}),jQuery(document).on("click","#arf_send_test_mail",function(){var e=!1,r=(jQuery("input#is_smtp_authentication").is(":checked")?""!=jQuery("input#frm_smtp_host").val()&&""!=jQuery("input#frm_smtp_port").val()&&""!=jQuery("input#frm_smtp_username").val()&&""!=jQuery("input#frm_smtp_password").val()&&(e=!0):""!=jQuery("input#frm_smtp_host").val()&&""!=jQuery("input#frm_smtp_port").val()&&(e=!0),!0),s=jQuery("input#sendtestmail_to").val(),a=jQuery("#sendtestmail_msg").val();if(""==s?(jQuery("#sendtestmail_to_error").css("display","block"),jQuery("#sendtestmail_to_invalid_mail_error").css("display","none"),r=!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?(jQuery("#sendtestmail_to_error").css("display","none"),jQuery("#sendtestmail_to_invalid_mail_error").css("display","none")):(jQuery("#sendtestmail_to_error").css("display","none"),jQuery("#sendtestmail_to_invalid_mail_error").css("display","block"),r=!1),""==a?(jQuery("#sendtestmail_msg_error").css("display","block"),r=!1):jQuery("#sendtestmail_msg_error").css("display","none"),!e||!r)return!1;var s=jQuery("input#sendtestmail_to").val(),a=jQuery("input#frm_reply_to").val(),e=jQuery("input#frm_reply_to_name").val(),r=!1,t=(jQuery("input#is_smtp_authentication").is(":checked")&&(r=!0),jQuery("#sendtestmail_msg").val()),_=jQuery("#arflite_validation_nonce").val();a&&(jQuery("#arf_send_test_mail_loader").show(),jQuery(".arf_btn_dark_blue").attr("disabled","disabled"),jQuery(".arf_btn_dark_blue").css("cursor","not-allowed"),jQuery.ajax({type:"POST",url:ajaxurl,data:"action=arf_send_test_mail&send_to="+s+"&reply_to="+a+"&reply_to_name="+e+"&message="+t+"&subject=SMTP Test E-Mail&is_smtp_authentication="+r+"&_wpnonce_arflite="+_,success:function(e){var r,e=JSON.parse(e);"true"==e.success?(jQuery("#arf_error_test_mail").hide(),jQuery("#arf_success_test_mail").show(),jQuery("#arf_success_test_mail").delay(3e3).fadeOut("slow"),jQuery("#sendtestmail_to").val(""),jQuery("#sendtestmail_msg").val("")):""!=e.msg&&(jQuery("#arf_smtp_error").remove(),jQuery("#arf_error_test_mail").html(e.msg),jQuery("#arf_error_test_mail").show(),jQuery("#arf_error_test_mail").append(e.log),e=jQuery(window).width(),e=((e=Number(e))-Number(jQuery(".arf_smpt_error").width()))/2,r=jQuery(window).height(),Number(r),jQuery(".arf_smpt_error").css("left",e+"px")),jQuery("#arf_send_test_mail_loader").hide(),jQuery(".arf_btn_dark_blue").removeAttr("disabled"),jQuery(".arf_btn_dark_blue").css("cursor","pointer")}}))}),jQuery(document).on("click","#arflite_gmail_api_copy",function(){var r,e=jQuery(this).attr("data-copied-title"),s=(jQuery(this).tipso("hide"),jQuery(this).tipso("destroy"),jQuery("#frm_arflite_gmail_auth_url").val()),a=(jQuery(".temp_textarea").remove(),document.createElement("textarea"));a.setAttribute("class","temp_textarea"),a.style.width="0px",a.style.height="0px",a.style.position="fixed",a.style.top="0",a.style.left="0",a.style.zIndex="-1",jQuery(a).text(s),document.body.appendChild(a);try{a.select(),"successful"==(document.execCommand("copy")?"successful":"unsuccessful")&&(jQuery(this).tipso({useTitle:!1,position:"top",width:"auto",background:"#444444",content:e}),r=this,setTimeout(function(){jQuery(r).trigger("mouseover")},500),setTimeout(function(){jQuery(r).tipso("hide"),jQuery(r).tipso("destroy");var e=r.getAttribute("data-copy-title");jQuery(r).tipso({useTitle:!1,position:"top",width:"auto",background:"#444444",content:e})},2e3))}catch(e){console.log("Oops, unable to copy")}}),jQuery(document).ready(function(e){if(0<jQuery("#arf_global_css").length&&"undefined"!=typeof wp&&void 0!==wp.codeEditor){var r=wp.codeEditor.defaultSettings?_.clone(wp.codeEditor.defaultSettings):{};r.codemirror=_.extend({},r.codemirror,{mode:"css",lint:!0});let e=wp.codeEditor.initialize(jQuery("#arf_global_css"),r);e.codemirror.on("change",function(e){document.getElementById("arf_global_css").value=e.getValue()})}}),jQuery(document).on("click","#arf_remove_junk_files",function(){jQuery("#delete_junk_file_msg").addClass("arfactive"),jQuery("#delete_junk_file_msg").parents(".arf_modal_overlay").addClass("arfactive")});